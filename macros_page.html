<CONTENT VERSION="1.0" LANG="fr" CHARSET="utf-8"/>

/**
 * Initialisation de la page.
 * Appelle les dépendances communes et initialise les fonctions de base.
 */
<DEFMACRO NAME="PAGE_INIT">
	<!--[ Chemins ]-->
	<LET VAR="dir_public" GLOBAL="1">tpl/public</LET>
	<LET VAR="dir_vendor" GLOBAL="1">[%DIR_PUBLIC]/vendor</LET>

	<!--[ Dépendances communes ]-->
	<USE MACROFILE="macros_base.html" />
	<USE MACROFILE="macros_head.html" />
	<USE MACROFILE="macros_nav.html" />
	<USE MACROFILE="macros_menu.html" />
	<USE MACROFILE="macros_header.html" />
	<USE MACROFILE="macros_footer.html" />
	<USE MACROFILE="macros_custom.html" />

	<!--[ Initialisation des fonctions de base ]-->
	<MACRO NAME="BASE_INIT" />
</DEFMACRO>

/**
 * Markup début de page.
 */
<DEFMACRO NAME="PAGE_START">
	<!DOCTYPE html>
	<html lang="[%PAGELANG]">
	<head>
		<MACRO NAME="PAGE_DEV_MODE_INIT"/>
		<MACRO NAME="HEAD_MAIN" />
	</head>
	<body class="[%BODY_CLASS]" data-sitelang="[#SITELANG]">
		<MACRO NAME="PAGE_DEV_MODE_WARNING"/>
		<MACRO NAME="HEADER_MAIN" />
		<div id="main-container" class="main-container container">
			<div class="row">
				<div id="main-menu-container" class="main-menu-container col-md-3 color-bg-2 d-md-block d-none">
					<MACRO NAME="MENU_MAIN" />
				</div>
				<main id="main-content" class='main-content col-md-9 col<IF COND="[%SIDE_CONTENTS]"> col-lg-6 main-content--horsart<ELSE />-lg-9</IF>' role="main">
</DEFMACRO>

/**
 * Markup fin de page.
 */
<DEFMACRO NAME="PAGE_END">
					</main><!--[ .main-content ]-->
					<IF COND="[%SIDE_CONTENTS]">
						<div class="col-md-3 color-bg-2 d-none d-md-block d-lg-none"></div>
						<div class="col-md-9 col-lg-2 side_contents"> <hr/>
							<MACRO NAME="BASE_SIDE_CONTENTS" />
						</div>
					</IF>
				</div><!--[ .row ]-->
			</div><!--[ .main-container ]-->
			<MACRO NAME="FOOTER_MAIN" />
		</body>
	</html>
</DEFMACRO>

/**
 * Initialisation du DEV_MODE.
 */
<DEFMACRO NAME="PAGE_DEV_MODE_INIT">
		<LET VAR="dev_mode_active" GLOBAL="1"></LET>
		<LET VAR="dist_css_path">./tpl/public/css/site.css</LET>
		<IF COND="![#DIST_CSS_PATH|file_exists] OR [%DEV_MODE]">
			<LET VAR="dev_mode_active" GLOBAL="1">1</LET>
		</IF>
</DEFMACRO>

/**
 * Avertissement pour les rédacteurs si DEV_MODE est activé.
 */
<DEFMACRO NAME="PAGE_DEV_MODE_WARNING">
	<IF COND="[%DEV_MODE_ACTIVE] AND [#LODELUSER.RIGHTS] GT 5">
		<div id="devmode-warning" class="devmode-warning" style="padding: 5px 10px; font-size: 12px; background-color: #a9e1fc; border-bottom: 1px solid #8cc9e5;"><b>Ce site est actuellement en mode de développement et présente des performances réduites.</b><br>Le mode de développement ne devrait jamais être utilisé sur un site accessible au public. <a href="https://github.com/edinum/nova#readme" target="_blank">En savoir plus…</a></div>
	</IF>
</DEFMACRO>